"use strict";var App={};App.init=function(a){var b=this,c=[];return b["super"]("init",a),b.assign("nav_list_id",""),b.assign("nav_list_name","全部文章"),b.assign("key",""),b.assign("title","前端小武--前端开发小武专注计算机基础和WEB前端开发知识"),b.assign("keywords","前端小武  谢耀武  小武  计算机基础   前端开发"),b.assign("description","谢耀武，网名前端小武，喜欢各种折腾, 喜欢研究源, 对美好的代码有极强的透视症, 崇尚有强烈技术氛围的UED..."),c.push(b.__get_list_data()),Promise.all(c).then(function(a){return b.assign("LIST",a[0]),a})},App.__get_list_data=function(){return D("List").get({cache:!0})},App.__call=function(a){return this.__404Action(a)},App.__404Action=function(){return this.status(404),this.display(VIEW_PATH+"/Touch/404.html")},App.__get_list=function(a){return a=a||{},a.field=a.field||"id, title, list_id, url, update_date, hit, markdown_content_list",D("Article").get(a).then(function(b){var c=a.isPage?b.data:b,d=[],e=D("List");return 0===c.length?b:(c.forEach(function(a){d.push(e.get({cache:!0,one:!0,where:{id:a.list_id}})),a.update_date=Date.elapsedDate(a.update_date,"yyyy-M-d"),a.markdown_content_list=a.markdown_content_list.replace(/http\:\/\/(www|github)\.xuexb(.+?)\.(jpg|git|jpeg|png)/g,function(a){return a.replace("http:","https:")})}),Promise.all(d).then(function(a){return c.forEach(function(b,c){b.list_data=a[c]}),b}).then(function(){return b}))})},module.exports=Controller(function(){return App});